Buá»•i hÃ´m nay chÃºng ta sáº½ tÃ¬m hiá»ƒu vá» cÃ¡ch mÃ  JMeter Ä‘á»c dá»¯ liá»‡u tá»« CSV Ä‘á»ƒ lÃ m data test.

ÄÃ£ gá»i lÃ  Testing thÃ¬ khÃ¡i niá»‡m data test Ä‘Ã£ khÃ´ng cÃ²n gÃ¬ xa láº¡ vá»›i chÃºng ta.
Manual â†’ Excel â†’ Copy ra sá»­ dá»¥ng
Automation â†’ Excel, CSV â†’ DÃ¹ng code Ä‘á»ƒ Ä‘á»c ra vÃ  input vÃ o test scenario
Vá»›i Performance Test cÅ©ng váº­y. NÃ³ cÅ©ng cáº§n cÃ³ data test â€” Ä‘Ã¢y lÃ  Ä‘iá»u khÃ´ng thá»ƒ trÃ¡nh khá»i.

ChÃºng ta Ä‘ang tÃ¬m hiá»ƒu vá» JMeter. CÃ´ng cá»¥ nÃ y Ä‘Æ°á»£c gá»i lÃ  No-code thÃ¬ khÃ´ng Ä‘Ãºng, gá»i lÃ  Low-code má»›i chuáº©n.
Cuá»™c Ä‘á»i má»™t Engineer thÃ¬ chÃºng ta sáº½ cá»‘ gáº¯ng theo lá»™ trÃ¬nh:
Full-code (Code miá»‡t mÃ i khÃ´ng ngá»«ng nghá»‰. Khi chÃ¡n code thÃ¬ vá»«a khÃ³c vá»«a code) â†’ Äi lÃ m má»™t thá»i gian rá»“i cá»‘ gáº¯ng giáº£m code xuá»‘ng chÃºt (Low-code â†’ Ãt code láº¡i) â†’ Manage â†’ No-code.
â†’ ÄÃ¢y lÃ  cÃ¢u chuyá»‡n vui em chia sáº» vá»›i má»i ngÆ°á»i thÃ´i ha â†’ Quay trá»Ÿ láº¡i bÃ i hÃ´m nay.

NhÆ° tiÃªu Ä‘á» buá»•i há»c cÃ³ Ä‘á» cáº­p Ä‘áº¿n CSV. Cháº¯c háº³n nhiá»u anh chá»‹ cÅ©ng biáº¿t nÃ³ lÃ  gÃ¬ rá»“i. MÃ¬nh cÅ©ng nÃªn Ä‘iá»ƒm qua chÃºt lÃ½ thuyáº¿t vá» CSV ha.

Cháº¯c háº³n má»i ngÆ°á»i quÃ¡ quen vá»›i viá»‡c dá»¯ liá»‡u náº±m trong table rá»“i Ä‘Ãºng khÃ´ng?

DÃ²ng Ä‘áº§u tiÃªn lÃ  Header
CÃ¡c dÃ²ng tiáº¿p theo gá»i lÃ  line dá»¯ liá»‡u
Má»—i giÃ¡ trá»‹ Ä‘Æ°á»£c náº±m trong 1 Ã´

â†’ File CSV vá» báº£n cháº¥t cÅ©ng y chang nhÆ° Table. Chá»‰ khÃ¡c lÃ  dá»¯ liá»‡u Ä‘Æ°á»£c phÃ¢n cÃ¡ch nhau bá»Ÿi dáº¥u â€œ,â€. ÄÃ´i khi cÃ³ thá»ƒ lÃ  â€œ;â€.

Table
| Há» tÃªn        | Tuá»•i | Äá»‹a chá»‰      |
|---------------|------|--------------|
| Nguyá»…n VÄƒn A  | 25   | HÃ  Ná»™i       |
| Tráº§n Thá»‹ B    | 30   | Há»“ ChÃ­ Minh  |

CSV
Há» tÃªn,Tuá»•i,Äá»‹a chá»‰
Nguyá»…n VÄƒn A,25,HÃ  Ná»™i
Tráº§n Thá»‹ B,30,Há»“ ChÃ­ Minh


VÃ­ dá»¥ mÃ¬nh cáº§n test PT cho má»™t API GET:
/products-service/products?product-name=""


Khi lÃ m TestPlan chÃºng ta sáº½ lÃ m nhÆ° nÃ o? CÃ³ nÃªn fix cá»©ng product-name = má»™t giÃ¡ trá»‹ nÃ o Ä‘Ã³ khÃ´ng?
â†’ KhÃ´ng Ä‘Ãºng. VÃ¬ sao?

ChÃºng ta sáº½ nhÃ¬n nháº­n á»Ÿ 2 gÃ³c nhÃ¬n:
GÃ³c nhÃ¬n 1: HÃ nh vi ngÆ°á»i dÃ¹ng
Táº¥t cáº£ ngÆ°á»i dÃ¹ng khi search product cÃ³ tÃ¬m cÃ¹ng má»™t tÃªn sáº£n pháº©m khÃ´ng?
â†’ KhÃ´ng. Má»—i ngÆ°á»i cÃ³ nhu cáº§u tÃ¬m kiáº¿m sáº£n pháº©m khÃ¡c nhau.

GÃ³c nhÃ¬n 2: HÃ nh vi há»‡ thá»‘ng
Náº¿u chÃºng ta chá»‰ cháº¡y test vá»›i 1 product name duy nháº¥t thÃ¬ váº¥n Ä‘á» gÃ¬ xáº£y ra?
NÃ³i vá» cache:
+ Cache á»Ÿ Redis
+ Cache á»Ÿ Database (cÃ¡c chiáº¿n lÆ°á»£c thá»±c thi)
â†’ Response time sáº½ khÃ´ng pháº£n Ã¡nh Ä‘Ãºng thá»±c táº¿ trÃªn production ná»¯a?

Tiáº¿p theo chÃºng ta tÃ¬m hiá»ƒu cÃ¡ch JMeter Ä‘á»c CSV â†’ CSV Data Set Config
Táº¡o thÆ° má»¥c â€” cáº¥u trÃºc giá»‘ng nhÆ° buá»•i 3:

performance
    + TestPlan
    + TestData
        + csv
        + image

â†’ Táº¡o file CSV data.csv trong thÆ° má»¥c csv
â†’ hoáº·c rename tá»« data.txt â†’ data.csv
VÃ­ dá»¥ dá»¯ liá»‡u:

fullname,address
Nguyen Van A,17 Le Duan
Tran Thi B,25 Nguyen Trai
Le Van C,88 Hai Ba Trung
Pham Thi D,12 Ly Thuong Kiet
Hoang Van E,45 Tran Hung Dao
Nguyen Thi F,101 Vo Thi Sau
Do Van G,33 Dien Bien Phu
Bui Thi H,77 Le Loi
Vu Van I,56 Nguyen Hue
Dang Thi J,19 Cach Mang Thang 8
Nguyen Van K,200 Hoang Hoa Tham
Tran Thi L,72 Bach Dang
Le Van M,5 Phan Chu Trinh
Pham Thi N,310 Tran Phu
Hoang Van O,66 Pasteur
Nguyen Thi P,142 Nguyen Dinh Chieu
Do Van Q,88 Ton Duc Thang
Bui Thi R,12 Vo Van Tan
Vu Van S,99 Le Thanh Ton
Dang Thi T,150 Nguyen Van Cu

Cáº¥u hÃ¬nh TestPlan Ä‘Æ¡n giáº£n: Dummy Sample
{
  "fullname": "Nguyen Tri Dien",
  "address": "17 Le Duan"
}

â†’ Run xem OK chÆ°a.
ThÃªm CSV Data Set Config
Browser file â†’ chá»n file CSV

Thay 2 giÃ¡ trá»‹ fix cá»©ng fullname vÃ  address â†’ ${fullname}, ${address}
Sá»­a loop â†’ 20 Ä‘á»ƒ kiá»ƒm tra Ä‘á»c 20 dÃ²ng thÃªm counter

â†’ Run â†’ OK
NhÆ° má»i ngÆ°á»i tháº¥y khi ta thay cÃ¡c giÃ¡ trá»‹ fullname vÃ  address sang biáº¿n thÃ¬ JMeter Ä‘Ã£ Ä‘á»c Ä‘Ãºng giÃ¡ trá»‹ tá»« CSV.

Táº¡i sao ${fullname}, ${address} láº¡i láº¥y Ä‘Æ°á»£c Ä‘Ãºng dá»¯ liá»‡u?
CSV cÃ³ dÃ²ng:
fullname,address
â†’ Máº·c Ä‘á»‹nh JMeter khi táº¡o CSV Data Set Config:
DÃ²ng Ä‘áº§u tiÃªn header Ä‘Æ°á»£c xem lÃ  danh sÃ¡ch tÃªn biáº¿n
DÃ²ng thá»© 2 trá»Ÿ Ä‘i lÃ  dá»¯ liá»‡u
â†’ Máº·c Ä‘á»‹nh nhÆ° váº­y Ä‘Ã£ giáº£i quyáº¿t 80% trÆ°á»ng há»£p sá»­ dá»¥ng CSV Data Set Config.
â†’ Ráº¥t Ä‘Æ¡n giáº£n Ä‘Ãºng khÃ´ng?

ğŸ“Œ Xá»­ lÃ½ dá»¯ liá»‡u Ä‘áº·c biá»‡t trong CSV
TH1: Chá»©a dáº¥u â€œ,â€ trong dá»¯ liá»‡u
VÃ­ dá»¥:

fullname,address
Nguyen Van A,19, Nguyen Trai
â†’ Run â†’ Not OK
â†’ JMeter sáº½ nháº­n address = 19 (sai mong Ä‘á»£i)

CÃ¡ch xá»­ lÃ½:
Bá»c dá»¯ liá»‡u trong dáº¥u ""
fullname,address
Nguyen Van A,"19, Nguyen Trai"
Báº­t:
Allow quoted data = True
â†’ Run â†’ OK

TH2: Chá»©a cáº£ dáº¥u , vÃ  dáº¥u "
VÃ­ dá»¥:
fullname,address
Nguyen Van A,19, "Nguyen Trai"
Náº¿u Ã¡p dá»¥ng TH1:
Nguyen Van A,"19, "Nguyen Trai""
â†’ Run â†’ Lá»—i EOF vÃ¬ JMeter khÃ´ng Ä‘á»c Ä‘Æ°á»£c.
CÃ¡ch xá»­ lÃ½ Ä‘Ãºng:
Bá»c toÃ n bá»™ giÃ¡ trá»‹ báº±ng "
Báº¥t ká»³ dáº¥u " bÃªn trong pháº£i double lÃªn thÃ nh ""
VÃ­ dá»¥:

fullname,address
Nguyen Van A,"19, ""Nguyen Trai"""

â†’ Run OK.

ÄÃ¢y lÃ  2 trÆ°á»ng há»£p phá»• biáº¿n nháº¥t trong CSV.
Best Practice â€“ Chuáº©n hÃ³a dá»¯ liá»‡u trÆ°á»›c khi test
Thay vÃ¬ pháº£i xá»­ lÃ½ dá»¯ liá»‡u Ä‘áº·c biá»‡t:
TH1 â†’ thay dáº¥u , báº±ng : hoáº·c /
Dáº¥u " â†’ thay báº±ng '
â†’ Äá»¡ phá»©c táº¡p, dá»… quáº£n lÃ½ hÆ¡n.
ğŸ“Œ CÃ¡c trÆ°á»ng trong CSV Data Set Config
(Pháº§n docs sáº½ demo trong bÃ i há»c.)
Note:
Khi dÃ¹ng CSV mÃ  test duration dÃ i â†’ JMeter Ä‘á»c háº¿t file trÆ°á»›c â†’ lá»—i.
â†’ NÃªn táº¡o CSV Ä‘á»§ dá»¯ liá»‡u vÃ  Ä‘á»§ header Ä‘á»ƒ trÃ¡nh pháº£i Ä‘iá»n biáº¿n phá»©c táº¡p.
